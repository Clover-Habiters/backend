FROM openjdk:17-oracle
ARG JAR_FILE=build/libs/Habiters-1.1.0.jar
ENV ACTIVE_PROFILE=${ACTIVE_PROFILE} \
DB_USER_NAME=${DB_USER_NAME} \
DB_PASSWORD=${DB_PASSWORD} \
DB_URL=${DB_URL} \
KAKAO_CLIENT_ID=${KAKAO_CLIENT_ID} \
KAKAO_URI=${KAKAO_URI} \
GOOGLE_CLIENT_ID=${GOOGLE_CLIENT_ID} \
GOOGLE_CLIENT_SECRET=${GOOGLE_CLIENT_SECRET} \
GOOGLE_URI=${GOOGLE_URI} \
NAVER_CLIENT_ID=${NAVER_CLIENT_ID} \
NAVER_CLIENT_SECRET=${NAVER_CLIENT_SECRET} \
NAVER_URI=${NAVER_URI} \
JWT_SECRET=${JWT_SECRET} \
REDIS_HOST=${REDIS_HOST} \
REDIS_PORT=${REDIS_PORT} \
SLACK_WEBHOOK_URL=${SLACK_WEBHOOK_URL}
COPY ${JAR_FILE} app.jar
ENTRYPOINT ["java", "-Dspring.profiles.active=${ACTIVE_PROFILE}", "-jar", "/app.jar"]